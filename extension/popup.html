<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Link Scan Result</title>
    <style>
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            width: 380px; 
            padding: 12px 18px; /* Adjusted padding */
            font-size: 14px;
            background-color: #f7f7f7; /* Slightly different bg */
            color: #333;
            line-height: 1.5; /* Improved readability */
        }
        h3 {
            margin-top: 0;
            margin-bottom: 18px; /* More space below heading */
            color: #1a1a1a;
            border-bottom: 1px solid #e5e5e5; /* Lighter border */
            padding-bottom: 10px;
            font-size: 1.2em; /* Slightly larger heading */
            font-weight: 600;
        }
        .info-section {
            margin-bottom: 8px; /* Less space between info lines */
            word-break: break-all; /* Prevent long URLs/Titles overflowing */
        }
        .info-section span:first-child { /* Style the labels */
             font-weight: 600; 
             color: #555;
             margin-right: 5px;
        }
        .details-section {
            background-color: #ffffff;
            border: 1px solid #e0e0e0;
            border-radius: 5px; /* Slightly more rounded */
            padding: 12px 15px; /* Adjusted padding */
            margin-top: 18px;
        }
        .details-section h4 {
             margin-top: 0;
             margin-bottom: 8px;
             font-size: 1.05em;
             font-weight: 600;
             color: #444;
             display: flex; /* For icon alignment */
             align-items: center;
        }
        .details-section h4 .header-icon {
             margin-right: 6px;
             font-size: 1.1em;
             opacity: 0.8;
        }
        .status {
             font-size: 1.15em; /* Slightly larger status */
             font-weight: bold;
             display: flex; 
             align-items: center;
             margin-bottom: 15px; /* More space below status */
        }
        .status-icon {
             margin-right: 8px;
             font-size: 1.3em; /* Larger icon */
             line-height: 1; /* Prevent icon affecting line height */
        }
        .status-safe { color: #2e7d32; }
        .status-suspicious { color: #ed6c02; }
        .status-error { color: #d32f2f; }
        
        pre {
            background-color: #f5f5f5; /* Lighter pre bg */
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            padding: 10px;
            max-height: 180px;
            overflow-y: auto;
            white-space: pre-wrap; 
            word-wrap: break-word; 
            font-size: 0.85em; /* Even smaller JSON */
            color: #555;
            line-height: 1.4;
        }
        #reasons-list {
            color: #c62828; /* Slightly different red */
            font-weight: normal; 
            list-style-type: disc;
            padding-left: 25px; /* More indent */
            margin: 5px 0;
            font-size: 0.95em;
        }
        #ai-analysis {
             font-style: normal; 
             margin-left: 0;
             padding: 5px 0;
             font-size: 0.95em;
             color: #444;
        }
        .button-group {
             margin-top: 20px;
             display: flex; /* Align buttons */
             gap: 10px; /* Space between buttons */
        }
        button {
             /* margin-top: 15px; */ /* Removed, handled by group */
             /* margin-right: 5px; */ /* Removed, handled by gap */
             padding: 6px 12px;
             border: 1px solid #ccc;
             border-radius: 4px;
             background-color: #f0f0f0; /* Lighter button */
             color: #333;
             cursor: pointer;
             font-size: 0.95em;
             font-weight: 500;
             transition: background-color 0.1s ease, border-color 0.1s ease; /* Smooth hover */
        }
        button:hover {
             background-color: #e0e0e0;
             border-color: #bbb;
        }
        .status[title] {
            cursor: help;
        }
    </style>
</head>
<body>
    <h3>Link Scan Result</h3>
    
    <div class="info-section status" id="status-container">
        <span id="status-icon" class="status-icon"></span>
        <span id="status-text">Status: Loading...</span>
    </div>
    <div class="info-section" id="url">
        <span>URL:</span> <span id="url-value">Loading...</span>
    </div>
    <div class="info-section" id="title">
        <span>Title:</span> <span id="title-value">Loading...</span>
    </div>
    
    <!-- Group the buttons -->
    <div class="button-group">
        <button id="toggle-analysis-details" style="display: none;">Show Analysis Details</button>
        <button id="toggle-technical-details" style="display: none;">Show Technical Data</button>
    </div>

    <!-- Container for local analysis reasons -->
    <div id="reasons-container" class="details-section" style="display: none;"> 
        <h4><span class="header-icon">üö©</span>Local Analysis Flags:</h4>
        <ul id="reasons-list"></ul>
    </div>

    <!-- Container for AI analysis -->
    <div id="ai-container" class="details-section" style="display: none;"> 
        <h4><span class="header-icon">ü§ñ</span>AI Assessment (Gemini):</h4>
        <div id="ai-analysis">Loading...</div>
    </div>

    <!-- Container for full JSON details (hidden by default) -->
    <div id="details-container" class="details-section" style="display: none;"> 
        <h4><span class="header-icon">‚öôÔ∏è</span>Full Scan Data (JSON):</h4>
        <pre id="details"></pre>
    </div>

    <script src="popup.js"></script>
</body>
</html>
